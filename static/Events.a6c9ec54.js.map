{"mappings":"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","sources":["views/components/Events.jsx","views/components/Event.jsx","node_modules/@parcel/runtime-js/lib/runtime-cb457fc3c44ca230.js","node_modules/@parcel/runtime-js/lib/runtime-092fe32a466953a1.js","node_modules/@parcel/runtime-js/lib/runtime-9238a48bb7a8833f.js","node_modules/date-fns/esm/isSameDay/index.js","node_modules/@parcel/runtime-js/lib/runtime-27714fa6696ead64.js"],"sourcesContent":["import React, {Fragment, useState, useEffect, useRef} from \"react\";\nimport classNames from \"classnames\";\nimport {delet, fetch} from \"../js/fetch\";\nimport Event from \"./Event\";\nimport isSameDay from 'date-fns/isSameDay';\n\nimport '../css/events.less';\nimport icon from \"../icons/remove-header.png\";\nimport iconHover from \"../icons/remove-hover.png\";\nimport iconDisabled from \"../icons/remove-reverse-disabled.png\";\n\nexport default props => {\n\n    const {src, name} = props;\n    const [events, setEvents] = useState([]);\n    const [deleteRequested, setDeleteRequested] = useState(false);\n\n    async function update() {\n        const res = await fetch(src);\n        setEvents(res);\n    }\n\n    useEffect(() => {\n        update();\n    }, [src]);\n\n    async function removeAll() {\n        if(deleteRequested) return;\n        const response = confirm(`Delete all ${events.length} events ?`);\n        if (response === true) {\n            setDeleteRequested(true);\n            await delet(src);\n            await update();\n        }\n    }\n    const elems = events.map((event, index) =>\n        <Event onDelete={update}\n               key={event.id}\n               id={event.id}\n               className={\n                   classNames(\n                       {\n                           'last-of-day': !isSameDay(new Date(event.begin),\n                               new Date(events[index + 1]?.begin))\n                       })}\n               event={event}/>\n    );\n\n    return (\n        <Fragment>\n            <div>{`${elems.length} event(s)`}</div>\n            <table className={classNames('event-list', name)}>\n                <thead>\n                <tr>\n                    <th className=\"id\"></th>\n                    <th className=\"camera\"></th>\n                    <th className=\"start\"></th>\n                    <th className=\"end\"></th>\n                    <th className=\"duration\"></th>\n                    <th className=\"delete\" onClick={removeAll}>\n                        <img className=\"danger btn\" src={!deleteRequested ? icon : iconDisabled}/>\n                        <img className=\"danger btn hover\" src={!deleteRequested ? iconHover : iconDisabled}/>\n                    </th>\n                </tr>\n                </thead>\n                <tbody>{elems}</tbody>\n            </table>\n        </Fragment>\n    );\n}","import React, {Fragment, useState, useEffect, useRef} from \"react\";\nimport {delet} from \"../js/fetch\";\nimport {pushView} from './Frame';\nimport format from 'date-fns/format'\nimport parseISO from 'date-fns/parseISO'\n\nimport icon from '../icons/remove.png';\nimport iconHover from '../icons/remove-hover.png';\nimport iconDisabled from '../icons/remove-reverse-disabled.png';\nimport EventData from \"./EventData\";\n\nexport default props => {\n\n    const {event} = props;\n    let {id, begin, done, camera, duration} = event;\n    const [deleteRequested, setDeleteRequested] = useState(false);\n\n    async function remove() {\n        if(deleteRequested) return;\n        const response = confirm(`Delete event ${id} for camera ${camera} ?`);\n        if (response === true) {\n            setDeleteRequested(true);\n            await delet(event.delete);\n            props?.onDelete(event);\n        }\n    }\n\n    begin = format(parseISO(begin), 'yyyy-MM-dd HH:mm');\n    done = format(parseISO(done), 'yyyy-MM-dd HH:mm');\n\n    return (\n        <tr className={props.className} onClick={() => pushView(<EventData event={event}/>)}>\n            <td>{id}</td>\n            <td>{camera}</td>\n            <td>{begin}</td>\n            <td>{done}</td>\n            <td>{duration}</td>\n            <td className=\"delete\" onClick={(e) => {\n                remove();\n                e.stopPropagation();\n            }}>\n                <img className=\"danger btn\" src={!deleteRequested ? icon : iconDisabled}/>\n                <img className=\"danger btn hover\" src={!deleteRequested ? iconHover : iconDisabled}/>\n            </td>\n        </tr>\n    );\n}","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"4mytQ\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2bBSN\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"4Fxk9\")).toString();","import startOfDay from \"../startOfDay/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isSameDay\n * @category Day Helpers\n * @summary Are the given dates in the same day (and year and month)?\n *\n * @description\n * Are the given dates in the same day (and year and month)?\n *\n * @param {Date|Number} dateLeft - the first date to check\n * @param {Date|Number} dateRight - the second date to check\n * @returns {Boolean} the dates are in the same day (and year and month)\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?\n * const result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))\n * //=> true\n *\n * @example\n * // Are 4 September and 4 October in the same day?\n * const result = isSameDay(new Date(2014, 8, 4), new Date(2014, 9, 4))\n * //=> false\n *\n * @example\n * // Are 4 September, 2014 and 4 September, 2015 in the same day?\n * const result = isSameDay(new Date(2014, 8, 4), new Date(2015, 8, 4))\n * //=> false\n */\n\nexport default function isSameDay(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeftStartOfDay = startOfDay(dirtyDateLeft);\n  var dateRightStartOfDay = startOfDay(dirtyDateRight);\n  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();\n}","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"94IoO\")).toString();"],"names":["$ayMG0","parcelRequire","$6972bec3b422475d$export$2e2bcd8739ae039","props","src","name","events","setEvents","$acw62","useState","deleteRequested","setDeleteRequested","async","update","res","$feHvS","fetch","useEffect","elems","map","event","index","jsx","$j2gbl","default","onDelete","id","className","$parcel$interopDefault","$8g1PZ","$hjw1k","Date","begin","jsxs","Fragment","length","onClick","confirm","delet","$5gcka","$5Qhf7","$cTqvt","$89f14640268f0198$export$2e2bcd8739ae039","done","camera","duration","$6IhJz","$dpjX2","$bpMHE","pushView","$bUUBt","e","delete","remove","stopPropagation","$cwZwg","module","exports","URL","resolve","url","toString","$cJfMa","$c9ad0c9b51445ea3$export$2e2bcd8739ae039","dirtyDateLeft","dirtyDateRight","$4LmDH","arguments","dateLeftStartOfDay","dateRightStartOfDay","getTime"],"version":3,"file":"Events.a6c9ec54.js.map"}